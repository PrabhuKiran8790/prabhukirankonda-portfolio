<script lang="ts">
	import { Menu, Search, X } from 'lucide-svelte';
	import { ThemeToggle, Logo } from '.';
	import { Button } from '../ui/button';
	import { openMobileMenu, searchOpen } from '$lib/stores';
	import { Toc } from './table-of-contents';
	import { page } from '$app/stores';
</script>

<div class="items-center h-16 px-2 bg-gray-300 border rounded-lg grid grid-cols-3 dark:bg-zinc-800">
	<div class="flex">
		<Logo />
	</div>

	<div class="mx-auto">
		{#if !$openMobileMenu && $page.url.pathname === `/blog/${$page.params.slug}`}
			<div>
				<Toc />
			</div>
		{/if}
		{#if $page.url.pathname === '/blog'}
			<div>
				<Button
					variant="ghost"
					size="icon"
					on:click={() => {
						$searchOpen = true;
					}}
				>
					<Search />
				</Button>
			</div>
		{/if}
	</div>

	<div class="flex items-center justify-end space-x-1 no-highlight">
		<ThemeToggle />
		<button on:click={() => ($openMobileMenu = !$openMobileMenu)} class="p-1 bg-none">
			{#if !$openMobileMenu}
				<Menu />
			{:else}
				<X />
			{/if}
		</button>
	</div>
</div>
